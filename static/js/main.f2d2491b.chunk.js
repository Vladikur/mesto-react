(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),i=a(6),o=a.n(i),r=(a(14),a(9)),s=a(2),u=a.p+"static/media/header__logo.931a48ca.svg",l=a(0);var p=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("img",{src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Mesto",className:"header__logo"})})},d=c.a.createContext();var h=function(e){var t=c.a.useContext(d),a=e.openedCard.owner._id===t._id,n="card__remove ".concat(a?"":"card__remove_visibility_hide"),i=e.cardLikes.some((function(e){return e._id===t._id})),o="card__like ".concat(i?"card__like_active":"");return Object(l.jsxs)("li",{className:"card",children:[Object(l.jsx)("button",{onClick:function(){e.onCardDelete(e.openedCard)},"aria-label":"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",type:"button",className:n}),Object(l.jsx)("div",{className:"card__image-container",children:Object(l.jsx)("img",{onClick:function(){e.onCardClick(e.openedCard)},src:e.cardImage,alt:e.cardName,className:"card__image"})}),Object(l.jsxs)("div",{className:"card__description-container",children:[Object(l.jsx)("h2",{className:"card__description",children:e.cardName}),Object(l.jsxs)("div",{className:"card__button-container",children:[Object(l.jsx)("button",{onClick:function(){e.onCardLike(e.openedCard)},"aria-label":"\u041b\u0430\u0439\u043a",type:"button",className:o}),Object(l.jsx)("p",{className:"card__likes",children:e.cardLikes.length})]})]})]})};var j=function(e){var t=c.a.useContext(d);return Object(l.jsxs)("main",{className:"content",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsxs)("div",{className:"profile__container",children:[Object(l.jsxs)("div",{className:"profile__image-container",children:[Object(l.jsx)("button",{"aria-label":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438 \u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f",type:"button",className:"profile__image-redact"}),Object(l.jsx)("img",{src:t.avatar,alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f",className:"profile__image",onClick:e.onEditAvatar})]}),Object(l.jsxs)("div",{className:"profile__container-info",children:[Object(l.jsxs)("div",{className:"profile__container-name",children:[Object(l.jsx)("h1",{className:"profile__name",children:t.name}),Object(l.jsx)("button",{"aria-label":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043d\u0438 \u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f",type:"button",className:"profile__redact",onClick:e.onEditProfile})]}),Object(l.jsx)("p",{className:"profile__description",children:t.about})]})]}),Object(l.jsx)("button",{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a \u0441 \u043c\u0435\u0441\u0442\u0430\u043c\u0438",type:"button",className:"profile__add-profile",onClick:e.onAddPlace})]}),Object(l.jsx)("section",{className:"places",children:Object(l.jsx)("ul",{className:"places__cards",children:e.initialCards.map((function(t){return Object(l.jsx)(h,{openedCard:t,onCardClick:e.\u0441ardClick,cardName:t.name,cardImage:t.link,cardLikes:t.likes,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})})]})};var m=function(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})};var _=function(e){return Object(l.jsx)("section",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_is-opened":""),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("button",{onClick:e.closePopup,"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",type:"button",className:"popup__exit popup__exit-profile"}),Object(l.jsx)("h2",{className:"popup__text-redaction",children:e.title}),Object(l.jsxs)("form",{onSubmit:e.onSubmit,name:"".concat(e.name),className:"popup__form popup__form-profile",children:[e.children,Object(l.jsx)("button",{type:"submit",className:"popup__save",children:e.buttonText})]})]})})};var f=function(e){var t=c.a.useContext(d),a=c.a.useState(""),n=Object(s.a)(a,2),i=n[0],o=n[1],r=c.a.useState(""),u=Object(s.a)(r,2),p=u[0],h=u[1],j=c.a.useState(""),m=Object(s.a)(j,2),f=m[0],b=m[1],O=c.a.useState(""),v=Object(s.a)(O,2),g=v[0],x=v[1];return c.a.useEffect((function(){o(t.name),h(t.about)}),[t,e.isOpen]),Object(l.jsxs)(_,{onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:i,about:p})},buttonText:"".concat(e.saving?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit",isOpen:e.isOpen,closePopup:e.closePopup,children:[Object(l.jsxs)("section",{className:"popup__input-element",children:[Object(l.jsx)("input",{value:i||"",onChange:function(e){o(e.target.value),b(e.target.validationMessage)},id:"sing-in-name",type:"text",placeholder:"\u0418\u043c\u044f",name:"name",className:"popup__input popup__input_change_name",required:!0,minLength:"2",maxLength:"40"}),Object(l.jsx)("span",{className:"popup__input-error",id:"sing-in-name-error",children:f})]}),Object(l.jsxs)("section",{className:"popup__input-element",children:[Object(l.jsx)("input",{value:p||"",onChange:function(e){h(e.target.value),x(e.target.validationMessage)},id:"sing-in-description",type:"text",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",className:"popup__input popup__input_change_description",required:!0,minLength:"2",maxLength:"200"}),Object(l.jsx)("span",{className:"popup__input-error",id:"sing-in-description-error",children:g})]})]})};var b=function(e){var t=c.a.useState(""),a=Object(s.a)(t,2),n=a[0],i=a[1],o=c.a.useState(""),r=Object(s.a)(o,2),u=r[0],p=r[1];return Object(l.jsx)(_,{onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:n}),i("")},buttonText:"".concat(e.saving?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"add-avatar",isOpen:e.isOpen,closePopup:e.closePopup,children:Object(l.jsxs)("section",{className:"popup__input-element",children:[Object(l.jsx)("input",{value:n||"",onChange:function(e){i(e.target.value),p(e.target.validationMessage)},id:"avatar-url",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"avatar",className:"popup__input popup__input_change_avatar",required:!0}),Object(l.jsx)("span",{className:"popup__input-error",id:"avatar-url-error",children:u})]})})};var O=function(e){var t=c.a.useState(""),a=Object(s.a)(t,2),n=a[0],i=a[1],o=c.a.useState(""),r=Object(s.a)(o,2),u=r[0],p=r[1],d=c.a.useState(""),h=Object(s.a)(d,2),j=h[0],m=h[1],f=c.a.useState(""),b=Object(s.a)(f,2),O=b[0],v=b[1];return Object(l.jsxs)(_,{onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:n,link:u}),i(""),p("")},buttonText:"".concat(e.saving?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",isOpen:e.isOpen,closePopup:e.closePopup,children:[Object(l.jsxs)("section",{className:"popup__input-element",children:[Object(l.jsx)("input",{value:n||"",onChange:function(e){i(e.target.value),m(e.target.validationMessage)},id:"sing-in-place",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"place",className:"popup__input popup__input_change_name-card",required:!0,minLength:"2",maxLength:"30"}),Object(l.jsx)("span",{className:"popup__input-error",id:"sing-in-place-error",children:j})]}),Object(l.jsxs)("section",{className:"popup__input-element",children:[Object(l.jsx)("input",{value:u||"",onChange:function(e){p(e.target.value),v(e.target.validationMessage)},id:"sing-in-url",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"url",className:"popup__input popup__input_change_src",required:!0}),Object(l.jsx)("span",{className:"popup__input-error",id:"sing-in-url-error",children:O})]})]})};var v=function(e){return Object(l.jsx)(_,{onSubmit:function(t){t.preventDefault(),e.onRemoveCard()},buttonText:"".concat(e.saving?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430"),title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"delete-card",isOpen:e.isOpen,closePopup:e.closePopup})};var g=function(e){return Object(l.jsx)("section",{className:"popup popup_type_image ".concat(e.cardLink?"popup_is-opened":""),children:Object(l.jsxs)("div",{className:"popup__photo-container",children:[Object(l.jsx)("button",{onClick:e.closePopup,"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0444\u043e\u0442\u043e",type:"button",className:"popup__exit-see-photo"}),Object(l.jsx)("img",{src:"".concat(e.cardLink),alt:"".concat(e.cardName),className:"popup__image-see-photo"}),Object(l.jsx)("h2",{className:"popup__text-see-photo",children:e.cardName})]})})},x=a(7),N=a(8),C=new(function(){function e(t){Object(x.a)(this,e),this.url=t.url,this.authorization=t.auth}return Object(N.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getProfileData",value:function(){var e=this;return fetch("".concat(this.url,"/users/me"),{headers:{authorization:this.authorization,method:"GET"}}).then((function(t){return e._getResponseData(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.url,"/cards"),{headers:{authorization:this.authorization,method:"GET"}}).then((function(t){return e._getResponseData(t)}))}},{key:"profileRedact",value:function(e){var t=this;return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._getResponseData(e)}))}},{key:"cardCreate",value:function(e){var t=this;return fetch("".concat(this.url,"/cards"),{method:"POST",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._getResponseData(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return t?fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this.authorization}}).then((function(e){return a._getResponseData(e)})):fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this.authorization}}).then((function(e){return a._getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.authorization}}).then((function(e){return t._getResponseData(e)}))}},{key:"avatarRedact",value:function(e){var t=this;return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._getResponseData(e)}))}}]),e}())({url:"https://nomoreparties.co/v1/cohort-27",auth:"947e1a41-7fdd-411e-be19-4441fbe7ac08"});var k=function(){var e=c.a.useState([]),t=Object(s.a)(e,2),a=t[0],n=t[1],i=c.a.useState({name:"",abaut:"",avatar:"",_id:""}),o=Object(s.a)(i,2),u=o[0],h=o[1],_=c.a.useState(!1),x=Object(s.a)(_,2),N=x[0],k=x[1],y=c.a.useState(!1),S=Object(s.a)(y,2),P=S[0],L=S[1],D=c.a.useState(!1),E=Object(s.a)(D,2),T=E[0],z=E[1],R=c.a.useState(null),A=Object(s.a)(R,2),M=A[0],U=A[1],w=c.a.useState({name:"",link:""}),I=Object(s.a)(w,2),q=I[0],J=I[1],F=c.a.useState(!1),B=Object(s.a)(F,2),G=B[0],H=B[1];function K(){P&&L(!1),N&&k(!1),T&&z(!1),M&&U(null),q.link&&J({name:"",link:""})}return c.a.useEffect((function(){C.getProfileData().then((function(e){e&&h(e)})).catch((function(e){return console.log(e)}))}),[]),c.a.useEffect((function(){var e=function(e){"Escape"===e.key&&K()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[K]),c.a.useEffect((function(){C.getInitialCards().then((function(e){n(e)})).catch((function(e){return console.log(e)}))}),[]),Object(l.jsx)("div",{className:"page",children:Object(l.jsxs)(d.Provider,{value:u,children:[Object(l.jsx)(p,{}),Object(l.jsx)(j,{initialCards:a,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===u._id}));C.changeLikeCardStatus(e._id,t).then((function(t){n((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:U,"\u0441ardClick":function(e){J(e)},onEditProfile:function(){L(!0)},onAddPlace:function(){z(!0)},onEditAvatar:function(){k(!0)}}),Object(l.jsx)(m,{}),Object(l.jsx)(f,{saving:G,onUpdateUser:function(e){H(!0),C.profileRedact(e).then((function(e){h(e),L(!1)})).catch((function(e){return console.log(e)})).finally((function(){H(!1)}))},isOpen:P,closePopup:K}),Object(l.jsx)(O,{saving:G,onAddPlace:function(e){H(!0),C.cardCreate(e).then((function(e){n([e].concat(Object(r.a)(a))),z(!1)})).catch((function(e){return console.log(e)})).finally((function(){H(!1)}))},isOpen:T,closePopup:K}),Object(l.jsx)(b,{saving:G,onUpdateAvatar:function(e){H(!0),C.avatarRedact(e).then((function(e){h(e),k(!1)})).catch((function(e){return console.log(e)})).finally((function(){H(!1)}))},isOpen:N,closePopup:K}),Object(l.jsx)(v,{saving:G,onRemoveCard:function(){H(!0),C.deleteCard(M._id).then((function(){n((function(e){return e.filter((function(e){return e._id!==M._id}))})),U(!1)})).catch((function(e){return console.log(e)})).finally((function(){H(!1)}))},isOpen:M,closePopup:K}),Object(l.jsx)(g,{cardName:q.name,cardLink:q.link,closePopup:K})]})})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),i(e),o(e)}))};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root")),y()}},[[16,1,2]]]);
//# sourceMappingURL=main.f2d2491b.chunk.js.map